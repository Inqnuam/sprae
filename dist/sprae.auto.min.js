(()=>{var G=Object.defineProperty,Q=(e,n)=>{for(var t in n)G(e,t,{get:n[t],enumerable:!0})},E,h,L,T,C;function U(e){E=e.signal,h=e.effect,C=e.computed,T=e.batch||(n=>n()),L=e.untracked||T}var A=Symbol("signals"),P=Symbol("length");function N(e,n){if(!e||e[A])return e;if(Array.isArray(e))return ee(e);if(e.constructor!==Object)return e;let t={...n?.[A]},r=E(Object.values(e).length);const a=new Proxy(t,{get:(s,i)=>i===P?r:i===A?t:t[i]?.valueOf(),set:(s,i,l,u)=>(u=t[i],D(t,i,l),u??++r.value,1),deleteProperty:(s,i)=>(t[i]&&(R(t,i),r.value--),1),ownKeys(){return r.value,Reflect.ownKeys(t)}});for(let s in e){const i=Object.getOwnPropertyDescriptor(e,s);i?.get?(t[s]=C(i.get.bind(a)))._set=i.set?.bind(a):(t[s]=void 0,D(t,s,e[s]))}return a}var Y={push:1,pop:1,shift:1,unshift:1,splice:1};function ee(e){let n;if(e[A])return e;let t=E(e.length),r=Array(e.length).fill();const a=new Proxy(r,{get(s,i){if(typeof i=="symbol")return i===P?t:i===A?r:r[i];if(i==="length")return Y[n]?t.peek():t.value;if(n=i,r[i])return r[i].valueOf();if(i<r.length)return(r[i]=E(N(e[i]))).value},set(s,i,l){if(i==="length"){for(let u=l,y=r.length;u<y;u++)delete a[u];return t.value=r.length=l,!0}return D(r,i,l),i>=t.peek()&&(t.value=r.length=Number(i)+1),!0},deleteProperty:(s,i)=>(r[i]&&R(r,i),1)});return a}function D(e,n,t){let r=e[n];if(n[0]==="_")e[n]=t;else if(!r)e[n]=r=t?.peek?t:E(N(t));else if(t!==r.peek())if(r._set)r._set(t);else if(Array.isArray(t)&&Array.isArray(r.peek())){const a=r.peek();a[P]?L(()=>{T(()=>{let s=0,i=t.length;for(;s<i;s++)a[s]=t[s];a.length=i})}):r.value=t}else r.value=N(t)}function R(e,n){const t=e[n],r=t[Symbol.dispose];r&&delete t[Symbol.dispose],delete e[n],r?.()}var K=Symbol.dispose||(Symbol.dispose=Symbol("dispose")),p={},m=new WeakMap;function g(e,n){if(!e?.childNodes)return;if(m.has(e))return Object.assign(m.get(e),n);const t=N(n||{}),r=[];return a(e),m.has(e)||m.set(e,t),e[K]=()=>{for(;r.length;)r.pop()();m.delete(e)},t;function a(s,i=s.parentNode){if(!!s.childNodes){for(let l=0;l<s.attributes?.length;){let u=s.attributes[l];if(u.name[0]===":"){s.removeAttribute(u.name);let y=u.name.slice(1).split(":");for(let k of y){let c=p[k]||p.default,o=(c.parse||$)(u.value),b=c(s,o,t,k);b&&r.push(b)}if(m.has(s))return s[K]&&r.push(s[K]);if(s.parentNode!==i)return}else l++}for(let l of[...s.childNodes])a(l,s)}}}var F={},$=(e,n,t)=>{if(t=F[e=e.trim()])return t;try{t=q(e)}catch(r){J(r,n,e)}return F[e]=t},J=(e,n,t="")=>{throw Object.assign(e,{message:`\u2234 ${e.message}

${n}${t?`="${t}"

`:""}`,expr:t})},q;g.use=e=>{e.signal&&U(e),e.compile&&(q=e.compile)};var j=e=>{if(!e.nodeType)return e;let n=e.content.cloneNode(!0),t=[...e.attributes],r=document.createTextNode(""),a=(n.append(r),[...n.childNodes]);return{childNodes:a,content:n,remove:()=>n.append(...a),replaceWith(s){s!==r&&(r.before(s),n.append(...a))},attributes:t,removeAttribute(s){t.splice(t.findIndex(i=>i.name===s),1)}}},B={};Q(B,{batch:()=>re,computed:()=>te,effect:()=>V,signal:()=>H,untracked:()=>ne});var _,x,H=(e,n,t=new Set)=>(n={get value(){return _?.deps.push(t.add(_)),e},set value(r){if(r!==e){e=r;for(let a of t)x?x.add(a):a()}},peek(){return e}},n.toJSON=n.then=n.toString=n.valueOf=()=>n.value,n),V=(e,n,t,r)=>(t=a=>{n?.call?.(),a=_,_=t;try{n=e()}finally{_=a}},r=t.deps=[],t(),a=>{for(n?.call?.();a=r.pop();)a.delete(t)}),te=(e,n=H(),t,r)=>(t={get value(){return r||(r=V(()=>n.value=e())),n.value},peek:n.peek},t.toJSON=t.then=t.toString=t.valueOf=()=>t.value,t),re=e=>{let n=x;n||(x=new Set);try{e()}finally{if(!n){n=x,x=null;for(const t of n)t()}}},ne=(e,n,t)=>(n=_,_=null,t=e(),_=n,t),X=Symbol("if");p.if=(e,n,t)=>{let r=e.nextElementSibling,a=document.createTextNode(""),s,i,l;return e.replaceWith(a),i=e.content?j(e):e,m.set(i,null),r?.hasAttribute(":else")&&(r.removeAttribute(":else"),r.hasAttribute(":if")||(r.remove(),l=r.content?j(r):r,m.set(l,null))),h(()=>{const u=n(t)?i:e[X]?null:l;r&&(r[X]=u===i),s!=u&&(s?.remove(),(s=u)&&(a.before(s.content||s),m.get(s)===null&&m.delete(s),g(s,t)))})},p.each=(e,[n,t,r],a)=>{const s=document.createTextNode("");e.replaceWith(s);let i,l,u=0;const y=C(()=>{l=null;let o=r(a);return typeof o=="number"&&(o=Array.from({length:o},(b,d)=>d+1)),o?.constructor===Object&&(l=Object.keys(o),o=Object.values(o)),o||[]}),k=()=>{L(()=>{var o,b;let d=0,v=y.value,O=v.length;if(i&&!i[P]){for(let w of i[A]||[])w[Symbol.dispose]();i=null,u=0}if(O<u)i.length=O;else{if(!i)i=v;else for(;d<u;d++)i[d]=v[d];for(;d<O;d++){i[d]=v[d];let w=d,M=N({[n]:i[A]?.[w]||i[w],[t]:l?l[w]:w},a),S=e.content?j(e):e.cloneNode(!0);s.before(S.content||S),g(S,M),((b=i[o=A]||(i[o]=[]))[d]||(b[d]={}))[Symbol.dispose]=()=>{S[Symbol.dispose](),S.remove()}}}u=O})};let c=0;return h(()=>{y.value[P]?.value,c?c++:(k(),queueMicrotask(()=>(c&&k(),c=0)))})},p.each.parse=e=>{let[n,t]=e.split(/\s+in\s+/),[r,a="$"]=n.split(/\s*,\s*/);return[r,a,$(t)]},p.ref=(e,n,t)=>{t[n]=e},p.ref.parse=e=>e,p.with=(e,n,t)=>{let r;return h(()=>{let a=n(t);g(e,r?a:r=N(a,t))})},p.html=(e,n,t)=>{let r=n(t);if(!r)return;let a=(r.content||r).cloneNode(!0);e.replaceChildren(a),g(e,t)},p.text=(e,n,t)=>(e.content&&e.replaceWith(e=j(e).childNodes[0]),h(()=>{let r=n(t);e.textContent=r??""})),p.class=(e,n,t)=>{let r=new Set;return h(()=>{let a=n(t),s=new Set;a&&(typeof a=="string"?a.split(" ").map(i=>s.add(i)):Array.isArray(a)?a.map(i=>i&&s.add(i)):Object.entries(a).map(([i,l])=>l&&s.add(i)));for(let i of r)s.has(i)?s.delete(i):e.classList.remove(i);for(let i of r=s)e.classList.add(i)})},p.style=(e,n,t)=>{let r=e.getAttribute("style");return h(()=>{let a=n(t);if(typeof a=="string")e.setAttribute("style",r+(r.endsWith(";")?"":"; ")+a);else{r&&e.setAttribute("style",r);for(let s in a)s[0]=="-"?e.style.setProperty(s,a[s]):e.style[s]=a[s]}})},p.default=(e,n,t,r)=>{if(!r.startsWith("on"))return h(()=>{let c=n(t);if(r)I(e,r,c);else for(let o in c)I(e,le(o),c[o])});const a=r.split("..").map(c=>{let o={evt:"",target:e,test:()=>!0};return o.evt=(c.startsWith("on")?c.slice(2):c).replace(/\.(\w+)?-?([-\w]+)?/g,(b,d,v="")=>(o.test=ie[d]?.(o,...v.split("-"))||o.test,"")),o});if(a.length==1)return h(()=>k(n(t),a[0]));let s,i,l,u=0;const y=c=>{l=k(o=>(l(),i=c?.(o),(u=++u%a.length)?y(i):s&&y(s)),a[u])};return h(()=>(s=n(t),!l&&y(s),()=>s=null));function k(c,{evt:o,target:b,test:d,defer:v,stop:O,prevent:w,immediate:M,...S}){v&&(c=v(c));const z=W=>{try{d(W)&&(O&&(M?W.stopImmediatePropagation():W.stopPropagation()),w&&W.preventDefault(),c?.(W))}catch(oe){J(oe,`:on${o}`,c)}};return b.addEventListener(o,z,S),()=>b.removeEventListener(o,z,S)}};var ie={prevent(e){e.prevent=!0},stop(e){e.stop=!0},immediate(e){e.immediate=!0},once(e){e.once=!0},passive(e){e.passive=!0},capture(e){e.capture=!0},window(e){e.target=window},document(e){e.target=document},throttle(e,n){e.defer=t=>se(t,n?Number(n)||0:108)},debounce(e,n){e.defer=t=>ae(t,n?Number(n)||0:108)},outside:e=>n=>{let t=e.target;return!(t.contains(n.target)||n.target.isConnected===!1||t.offsetWidth<1&&t.offsetHeight<1)},self:e=>n=>n.target===e.target,ctrl:(e,...n)=>t=>f.ctrl(t)&&n.every(r=>f[r]?f[r](t):t.key===r),shift:(e,...n)=>t=>f.shift(t)&&n.every(r=>f[r]?f[r](t):t.key===r),alt:(e,...n)=>t=>f.alt(t)&&n.every(r=>f[r]?f[r](t):t.key===r),meta:(e,...n)=>t=>f.meta(t)&&n.every(r=>f[r]?f[r](t):t.key===r),arrow:()=>f.arrow,enter:()=>f.enter,esc:()=>f.esc,tab:()=>f.tab,space:()=>f.space,delete:()=>f.delete,digit:()=>f.digit,letter:()=>f.letter,char:()=>f.char},f={ctrl:e=>e.ctrlKey||e.key==="Control"||e.key==="Ctrl",shift:e=>e.shiftKey||e.key==="Shift",alt:e=>e.altKey||e.key==="Alt",meta:e=>e.metaKey||e.key==="Meta"||e.key==="Command",arrow:e=>e.key.startsWith("Arrow"),enter:e=>e.key==="Enter",esc:e=>e.key.startsWith("Esc"),tab:e=>e.key==="Tab",space:e=>e.key==="\xA0"||e.key==="Space"||e.key===" ",delete:e=>e.key==="Delete"||e.key==="Backspace",digit:e=>/^\d$/.test(e.key),letter:e=>/^\p{L}$/gu.test(e.key),char:e=>/^\S$/.test(e.key)},I=(e,n,t)=>{t==null||t===!1?e.removeAttribute(n):e.setAttribute(n,t===!0?"":typeof t=="number"||typeof t=="string"?t:"")},se=(e,n)=>{let t,r,a=s=>{t=!0,setTimeout(()=>{if(t=!1,r)return r=!1,a(s),e(s)},n)};return s=>t?r=!0:(a(s),e(s))},ae=(e,n)=>{let t;return r=>{clearTimeout(t),t=setTimeout(()=>{t=null,e(r)},n)}},le=e=>e.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(n,t)=>(t?"-":"")+n.toLowerCase());p.value=(e,[n,t],r)=>{const a=e.type==="text"||e.type===""?i=>e.setAttribute("value",e.value=i??""):e.tagName==="TEXTAREA"||e.type==="text"||e.type===""?(i,l,u)=>(l=e.selectionStart,u=e.selectionEnd,e.setAttribute("value",e.value=i??""),l&&e.setSelectionRange(l,u)):e.type==="checkbox"?i=>(e.checked=i,I(e,"checked",i)):e.type==="select-one"?i=>{for(let l in e.options)l.removeAttribute("selected");e.value=i,e.selectedOptions[0]?.setAttribute("selected","")}:i=>e.value=i,s=e.type==="checkbox"?i=>t(r,e.checked):i=>t(r,e.value);return e.addEventListener("input",s),e.addEventListener("change",s),h(()=>a(n(r)))},p.value.parse=e=>{let n=[$(e)];try{n.push($(`${e}=arguments[1];`))}catch{}return n},p.fx=(e,n,t)=>h(()=>n(t)),g.use(B),g.use({compile:e=>g.constructor(`with (arguments[0]) { return ${e} };`)});var Z=g;window.sprae=Z,document.currentScript?.hasAttribute("init")&&Z(document.documentElement)})();
